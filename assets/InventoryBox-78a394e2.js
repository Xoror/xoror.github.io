import{r as h,y as se,z as ie,E as ge,H as xe,J as je,K as pe,L as be,N as ye,O as ve,P as we,Q as Ce,S as Se,U as Ie,j as e,h as H,C as T,u as _,R as J,A as K,b as ke,B as Y,c as q,k as qe,l as Ee,V as Ne,W as Ae,X as Fe,Y as X,Z as re,f as z,I as F,F as w,M as D,p as k,a as le,T as oe,_ as Z,n as ee,i as Re,$ as $e,a0 as De,v as Le,a1 as Oe,a2 as Ve}from"./index-95023540.js";import{O as U}from"./OffCanvas-bd396f7b.js";var te=function(n){return n.reduce(function(l,a){var u=a[0],i=a[1];return l[u]=i,l},{})},ne=typeof window<"u"&&window.document&&window.document.createElement?h.useLayoutEffect:h.useEffect;function Me(t){var n=t.state;Object.keys(n.elements).forEach(function(l){var a=n.styles[l]||{},u=n.attributes[l]||{},i=n.elements[l];!se(i)||!ie(i)||(Object.assign(i.style,a),Object.keys(u).forEach(function(f){var m=u[f];m===!1?i.removeAttribute(f):i.setAttribute(f,m===!0?"":m)}))})}function Pe(t){var n=t.state,l={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,l.popper),n.styles=l,n.elements.arrow&&Object.assign(n.elements.arrow.style,l.arrow),function(){Object.keys(n.elements).forEach(function(a){var u=n.elements[a],i=n.attributes[a]||{},f=Object.keys(n.styles.hasOwnProperty(a)?n.styles[a]:l[a]),m=f.reduce(function(p,b){return p[b]="",p},{});!se(u)||!ie(u)||(Object.assign(u.style,m),Object.keys(i).forEach(function(p){u.removeAttribute(p)}))})}}const We={name:"applyStyles",enabled:!0,phase:"write",fn:Me,effect:Pe,requires:["computeStyles"]};var Te=[xe,je,pe,We,be,ye,ve,we,Ce],ze=ge({defaultModifiers:Te}),_e=typeof Element<"u",Be=typeof Map=="function",He=typeof Set=="function",Ue=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Q(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var l,a,u;if(Array.isArray(t)){if(l=t.length,l!=n.length)return!1;for(a=l;a--!==0;)if(!Q(t[a],n[a]))return!1;return!0}var i;if(Be&&t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i=t.entries();!(a=i.next()).done;)if(!n.has(a.value[0]))return!1;for(i=t.entries();!(a=i.next()).done;)if(!Q(a.value[1],n.get(a.value[0])))return!1;return!0}if(He&&t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i=t.entries();!(a=i.next()).done;)if(!n.has(a.value[0]))return!1;return!0}if(Ue&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(l=t.length,l!=n.length)return!1;for(a=l;a--!==0;)if(t[a]!==n[a])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof n.valueOf=="function")return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof n.toString=="function")return t.toString()===n.toString();if(u=Object.keys(t),l=u.length,l!==Object.keys(n).length)return!1;for(a=l;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,u[a]))return!1;if(_e&&t instanceof Element)return!1;for(a=l;a--!==0;)if(!((u[a]==="_owner"||u[a]==="__v"||u[a]==="__o")&&t.$$typeof)&&!Q(t[u[a]],n[u[a]]))return!1;return!0}return t!==t&&n!==n}var Qe=function(n,l){try{return Q(n,l)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}};const Ge=Se(Qe);var Ye=[],Je=function(n,l,a){a===void 0&&(a={});var u=h.useRef(null),i={onFirstUpdate:a.onFirstUpdate,placement:a.placement||"bottom",strategy:a.strategy||"absolute",modifiers:a.modifiers||Ye},f=h.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),m=f[0],p=f[1],b=h.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(o){var s=o.state,C=Object.keys(s.elements);Ie.flushSync(function(){p({styles:te(C.map(function(I){return[I,s.styles[I]||{}]})),attributes:te(C.map(function(I){return[I,s.attributes[I]]}))})})},requires:["computeStyles"]}},[]),y=h.useMemo(function(){var g={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[b,{name:"applyStyles",enabled:!1}])};return Ge(u.current,g)?u.current||g:(u.current=g,g)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,b]),x=h.useRef();return ne(function(){x.current&&x.current.setOptions(y)},[y]),ne(function(){if(!(n==null||l==null)){var g=a.createPopper||ze,o=g(n,l,y);return x.current=o,function(){o.destroy(),x.current=null}}},[n,l,a.createPopper]),{state:x.current?x.current.state:null,styles:m.styles,attributes:m.attributes,update:x.current?x.current.update:null,forceUpdate:x.current?x.current.forceUpdate:null}};const ae=t=>{let n;return t.data!=null?n=t.data:n={name:t.name,category:t.category,rarity:t.rarity,quantity:t.quantity,worth:t.worth,weight:t.weight,description:t.description,attunable:t.attunable,attuneRequirement:t.attuneRequirement},e.jsxs("div",{className:`${t.show} itemcard`,children:[e.jsx("h4",{children:n.name}),e.jsxs("h6",{children:[" (",n.category,", ",n.rarity,") "]}),e.jsxs(H,{className:"itemcard-row",children:[e.jsx(T,{children:e.jsx("span",{children:" Quantity: "})}),e.jsx(T,{md:"auto",children:n.qty})]}),e.jsxs(H,{className:"itemcard-row",children:[e.jsx(T,{children:e.jsx("span",{children:" Worth: "})}),e.jsxs(T,{md:"auto",children:[n.worth==="-"?"-":parseInt(n.qty)*parseFloat(n.worth)," ",parseInt(n.qty)>1?e.jsxs("span",{children:["(",n.worth,") "]}):null," gp"]})]}),e.jsxs(H,{className:"itemcard-row",children:[e.jsx(T,{children:e.jsx("span",{children:" Weight: "})}),e.jsxs(T,{md:"auto",children:[n.weight==="-"?"-":parseInt(n.qty)*parseFloat(n.weight)," ",parseInt(n.qty)>1?e.jsxs("span",{children:["(",n.weight,")  "]}):null," lbs"]})]}),e.jsx(H,{children:e.jsx(T,{className:"itemcard-section overflow",children:n.description.map((l,a)=>e.jsxs("p",{style:{paddingRight:"0.5em",textAlign:"justify"},children:[" ",l," "]},`item-description-paragraph-${a}`))})}),e.jsx("section",{children:n.attunable?e.jsxs("p",{className:"actioncard-footer",children:[" Attunement: ",n.attuneRequirement," "]}):e.jsx("p",{className:"actioncard-footer",children:" No attunement required "})})]},t.id)},ce=t=>{const n=_(),[l,a]=h.useState({filtered:!0,id:"",name:"Loading...",container:"",category:"",qty:"",worth:"",weight:"",isEquipped:"",rarity:"",attunable:"",attuned:"",attuneRequirement:"",description:[]}),[u,i]=h.useState(1),f=t.offCanvas!==void 0,m=async c=>{const r=await fetch("https://www.dnd5eapi.co"+c.url);if(!r.ok)console.log("Data coud not be fetched!");else return r.json()},p=(c,r)=>{c.stopPropagation(),t.setDefaultContainerValues(r),t.setContainerEditing(!0),t.setShowAddContainer(!0)},b=(c,r)=>{n(Ne(r))},y=(c,r)=>{n(Ae(r))},x=(c,r)=>{c.stopPropagation(),t.setDefaultValues(r),t.setOldData(r),t.changeEditing(!0),t.setInputFocus(),t.inputRef.current.scrollIntoView()},g=(c,r)=>{c.stopPropagation();let d=c.target.checked;n(Fe(r,d))};let o="right",s=t.cardID;const[C,I]=h.useState([!1,"bla"]),[E,N]=h.useState([!1,s]);h.useEffect(()=>{E[1]!=s&&N([E[0],s])},[E,s]);const V=(c,r)=>{let d;s=t.cardID,f&&m(t.bodies.find(S=>S.id===r)).then(S=>{let G=X(S,r,t.header,t.selectedContainer,u);a(G)}).catch(S=>{console.log(S.message)}),C[0]&&C[1]===r?I([!1,"bla"]):I([!0,r]),d=`inventory-table-row-id-${r}`,L(document.getElementById(d)),t.setCardID(r),s=r,E[1]===r?N([!E[0],r]):E[0]?(N([E[0],r]),t.setCardID(r)):N([!E[0],r])},$=(c,r)=>{c.stopPropagation(),r==="inc"?i(u+1):r==="dec"?i(u-1):t.selectedContainer!=""?m(t.bodies.find(d=>d.id===r)).then(d=>{let S=X(d,r,t.header,t.selectedContainer,u,"addItemList");n(re(S)),a(S)}).catch(d=>{console.log(d.message)}):(t.setContainerFocus(),t.containerFocus.current.scrollIntoView())},[M,L]=h.useState(null),[R,O]=h.useState(null),[P,B]=h.useState(null);return Je(M,R,{placement:o,modifiers:[{name:"arrow",options:{element:P}},{name:"offset",options:{offset:[0,10]}}]}),e.jsxs(e.Fragment,{children:[f?e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"0px hidden black"},children:[e.jsxs("td",{children:[" ",t.header," "]}),e.jsx("td",{})]})}):t.container.label==="Equipment"?e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"0px hidden black"},children:[e.jsx("td",{}),e.jsx("td",{children:" Name "}),e.jsx("td",{children:" Qty "}),e.jsxs("td",{children:[" Weight",e.jsx("br",{}),"lbs "]}),e.jsxs("td",{children:[" Worth",e.jsx("br",{}),"gp "]}),e.jsx("td",{})]})}):null,e.jsxs("tbody",{children:[f?e.jsxs("tr",{children:[e.jsx("td",{children:" Name "}),e.jsx("td",{children:" "})]}):e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{children:[e.jsxs("b",{children:[t.container.label," "]}),t.container.containsWeight,t.container.maxWeightIn===0?null:"/"+t.container.maxWeightIn," lbs"]}),e.jsx("td",{}),e.jsxs("td",{children:[" ",t.container.weight!=0?t.container.weight:null," "]}),e.jsx("td",{}),t.container.label!="Equipment"?e.jsx("td",{style:{paddingRight:"0",paddingLeft:"0",zIndex:"2",width:"4.5em"},children:e.jsxs("div",{style:{paddingRight:"0",paddingLeft:"0",zIndex:"2"},children:[e.jsx("button",{className:"react-icons-button edit",onClick:c=>p(c,t.container),"aria-label":"edit container button",children:e.jsx(J,{size:"1.5em",className:"edit-button"})}),e.jsx("button",{className:"react-icons-button delete",onClick:c=>b(c,t.container.id),"aria-label":"delete container button",children:e.jsx(K,{size:"1.5em",className:"delete-button"})})]})}):e.jsx("td",{})]}),t.bodies.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,children:["No items ",f?" match":"in "+t.container.label]})}):t.bodies.map((c,r)=>e.jsxs(ke.Fragment,{children:[e.jsxs("tr",{className:"action-table",id:`inventory-table-row-id-${c.id}`,onClick:f?d=>V(d,c.id):d=>V(d,c.id),children:[f?null:e.jsx("td",{style:{height:"1.5em",width:"1.5em",zIndex:"2"},children:e.jsx("div",{className:"checkbox-wrapper",children:e.jsx("input",{className:"letter-e",type:"checkbox",id:c.name,value:"prepared",onClick:d=>g(d,c.id),defaultChecked:c.isEquipped})})}),e.jsxs("td",{children:[c.name,null]}),f?e.jsx("td",{children:e.jsxs(Y,{style:{float:"right",minWidth:"110px",zIndex:"5"},"aria-label":"adjust quantity of items to add",children:[e.jsx(q,{style:{padding:"0 0.25em 0 0.25em",border:"1px solid black"},variant:"danger",onClick:d=>$(d,"dec"),children:"-"}),e.jsxs(q,{style:{padding:"0 0.25em 0 0.25em",border:"1px solid black"},variant:"dark",onClick:d=>$(d,c.id),children:["Add ",u]}),e.jsx(q,{style:{padding:"0 0.25em 0 0.25em",border:"1px solid black"},variant:"success",onClick:d=>$(d,"inc"),children:"+"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("td",{children:[" ",c.qty," "]}),e.jsxs("td",{children:[" ",c.qty*c.weight," "]}),e.jsxs("td",{children:[" ",c.qty*parseFloat(c.worth)," "]}),e.jsx("td",{style:{paddingRight:"0",paddingLeft:"0",zIndex:"2",width:"4.5em"},children:e.jsxs("div",{style:{paddingRight:"0",paddingLeft:"0",height:"1.5em",zIndex:"2"},children:[e.jsx("button",{className:"react-icons-button edit",onClick:d=>x(d,c),"aria-label":"edit item button",children:e.jsx(J,{size:"1.5em",className:"edit-button"})}),e.jsx("button",{className:"react-icons-button delete",onClick:d=>y(d,c.id),"aria-label":"delete item button",children:e.jsx(K,{size:"1.5em",className:"delete-button"})}),C[0]&&C[1]===c.id?e.jsx("button",{className:"react-icons-button",onClick:d=>I([!1,"bla"]),"aria-label":`expand ${t.spells?"spell":"action"} details`,children:e.jsx(qe,{size:"1.5em",className:"expand-button"})}):e.jsx("button",{className:"react-icons-button",onClick:d=>I([!0,c.id]),"aria-label":`expand ${t.spells?"spell":"action"} details`,children:e.jsx(Ee,{size:"1.5em",className:"expand-button"})})]})})]})]},`inventory-table-row-id-${c.id===void 0?r:c.id}`),f?C[0]&&C[1]===c.id?e.jsx("tr",{children:e.jsx("td",{style:{borderRight:"1px solid rgba(1,1,1,0.5)",borderLeft:"1px solid rgba(1,1,1,0.5)"},colSpan:6,children:e.jsx(ae,{id:`itemcard-${c.id}`,data:l})})},`item-details-id-${c.id}`):null:C[0]&&C[1]===c.id?e.jsx("tr",{children:e.jsx("td",{style:{borderRight:"1px solid rgba(1,1,1,0.5)",borderLeft:"1px solid rgba(1,1,1,0.5)"},colSpan:6,children:e.jsx(ae,{id:`itemcard-${c.id}`,data:c})})},`item-details-id-${l.id}`):null]},`sub-table-for-${t.header}-item-${c.id}`)),t.index!=t.containersLength-1?e.jsx("tr",{style:{height:"1em"}}):null]})]})},Ke=t=>{_();const n=z(o=>o.inventory.containers),l=t.handleSubmit,a=t.editing,u=t.setEditing,i=t.defaultValues,f=t.setDefaultValues,m=t.handleSelectValues,p=t.itemTemplate,b=o=>{o.preventDefault(),t.setShowAddItem(!1),t.setShowQuickAddItem(!1),l(o)},y=o=>e.jsxs(e.Fragment,{children:[e.jsxs(D.Body,{children:[e.jsxs(F,{children:[e.jsx(k,{controlId:`item-name-${o?"modal":"quick"}`,label:"Name",children:e.jsx(w.Control,{ref:t.inputRef,className:`${o?"top":"middle"}-left-group`,value:i.name,required:!0,placeholder:"",onChange:s=>m(s,"name")})}),e.jsx(k,{controlId:`item-category-${o?"modal":"quick"}`,label:"Category",children:e.jsxs(w.Select,{"aria-labelledby":"item-category",value:i.category,required:!0,onChange:s=>m(s,"category"),children:[e.jsx("option",{value:"",children:"Choose Item Category"}),x.map((s,C)=>e.jsx("option",{value:s,children:s},`category-option-${s}`))]})}),e.jsx(k,{controlId:`item-container-${o?"modal":"quick"}`,label:"Container",children:e.jsxs(w.Select,{"aria-labelledby":"item-container",className:`${o?"top":"middle"}-right-group`,value:i.container,required:!0,placeholder:"Select or create Container...",onChange:s=>m(s,"container"),children:[e.jsx("option",{value:"",children:"Choose Container"}),n.map((s,C)=>e.jsx("option",{value:s.id,children:s.label},`container-option-${s.value}`))]})})]}),e.jsxs(F,{children:[e.jsx(k,{controlId:`item-quantity-${o?"modal":"quick"}`,label:"Quantity",children:e.jsx(w.Control,{"aria-labelledby":"item-quantity",className:"middle-left-group",value:i.qty,onChange:s=>m(s,"qty"),required:!0,type:"number",min:"0",placeholder:""})}),e.jsx(k,{controlId:`item-worth-${o?"modal":"quick"}`,label:"Worth (1, gp)",children:e.jsx(w.Control,{"aria-labelledby":"item-worth",value:i.worth,onChange:s=>m(s,"worth"),required:!0,placeholder:"",type:"number",min:"0",step:"0.01"})}),e.jsx(k,{controlId:`item-weight-${o?"modal":"quick"}`,label:"Weight (1, lbs)",children:e.jsx(w.Control,{"aria-labelledby":"item-weight",className:"middle-right-group",value:i.weight,onChange:s=>m(s,"weight"),required:!0,placeholder:"",type:"number",min:"0",step:"0.01"})})]}),e.jsxs(F,{children:[e.jsx(k,{controlId:`item-is-wearing-${o?"modal":"quick"}`,label:"Is wearing?",children:e.jsxs(w.Select,{"aria-labelledby":"item-is-wearing",className:"middle-left-group",type:"boolean",value:i.isEquipped,required:!0,onChange:s=>m(s,"isEquipped"),children:[e.jsx("option",{value:"",children:"Choose if wearing"}),e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})}),e.jsx(k,{controlId:`item-rarity-${o?"modal":"quick"}`,label:"Rarity",children:e.jsxs(w.Select,{"aria-labelledby":"item-rarity",className:"middle-right-group",type:"text",value:i.rarity,required:!0,onChange:s=>m(s,"rarity"),children:[e.jsx("option",{value:"",children:"Choose Rarity"}),g.map((s,C)=>e.jsx("option",{value:s,children:s},`rarity-option-${s}`))]})})]}),e.jsxs(F,{children:[e.jsx(k,{controlId:`item-is-attunable-${o?"modal":"quick"}`,label:"Is attunable?",children:e.jsxs(w.Select,{"aria-labelledby":"item-is-attunable",className:"middle-left-group",type:"boolean",value:i.attunable,required:!0,onChange:s=>m(s,"attunable"),children:[e.jsx("option",{value:"",children:"Chose if attunable"}),e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})}),i.attunable===!0?e.jsx(k,{controlId:`item-is-attuned-${o?"modal":"quick"}`,label:"Is attuned?",children:e.jsxs(w.Select,{"aria-labelledby":"item-is-attuned",type:"boolean",value:i.attuned,required:!0,onChange:s=>m(s,"attuned"),children:[e.jsx("option",{value:"",children:"Choose if attuned"}),e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})}):null,o?null:e.jsx(q,{className:"middle-right-group",variant:"success","aria-label":"submit",type:"submit",children:"Submit"})]}),i.attunable?e.jsx(k,{controlId:`item-attune-requirement-${o?"modal":"quick"}`,label:"Attunement Requirement (e.g. 'requires attunement by a druid')",children:e.jsx(w.Control,{as:"textarea","aria-labelledby":"item-attune-requirement",className:"middle-right-group middle-left-group",style:{height:"6em"},placeholder:"",value:i.attuneRequirement,onChange:s=>m(s,"attuneRequirement")})}):null,e.jsx(k,{controlId:`item-description-${o?"modal":"quick"}`,label:"Description",children:e.jsx(w.Control,{"aria-labelledby":"item-description",style:{height:"8em"},required:!0,className:"bottom-left-group bottom-right-group",as:"textarea",placeholder:"",value:i.description,onChange:s=>m(s,"description")})})]}),o?e.jsxs(D.Footer,{children:[e.jsx(q,{variant:"danger",type:"button",onClick:()=>t.setShowAddItem(!1),children:"Close"}),e.jsx(q,{variant:"primary",type:"submit",children:"Save Changes"})]}):null]});let x=["Adventuring Gear","Ammunition","Arcane Focus","Armor","Artisan's Tools","Druidic Focus","Gaming Set","Heavy Armor","Holy Symbol","Instrument","Light Armor","Martial Melee Weapon","Martial Ranged Weapon","Medium Armor","Poison","Potion","Other","Ring","Rod","Scroll","Shield","Simple Melee Weapon","Simple Ranged Weapon","Spellcasting Focus","Staff","Vehicle (Air)","Vehicle (Land)","Vehicle (Water)","Wand","Wondrous Item"],g=["Mundane","Common","Uncommon","Rare","Very Rare","Legendary","Artifact","Unknown"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{"aria-labelledby":`${a?"edit":"quick-add-new"}-item`,className:t.showQuickAddItem?null:"visually-hidden",children:[e.jsxs(F,{children:[e.jsxs(F.Text,{as:"label",id:`${a?"edit":"quick-add-new"}-item`,className:"top-left-group top-right-group",style:{flexGrow:"2"},children:[" ",a?"Currently editing: "+i.name:"Add New Item"," "]}),a?e.jsx(q,{className:"top-right-group",onClick:()=>(u(!1),f(p)),children:"Cancel"}):""]}),e.jsx(w,{"aria-label":"quick add new item",onSubmit:o=>b(o),children:y(!1)})]}),e.jsxs(D,{backdrop:"static","aria-labelledby":"add-new-item-dialog",size:"lg",show:t.showAddItem,onHide:()=>t.setShowAddItem(!1),children:[e.jsx(D.Header,{closeButton:!0,children:e.jsx(D.Title,{as:"label",id:"add-new-item-dialog",children:"Adding a new Item"})}),e.jsx(w,{"aria-label":"add new item",onSubmit:o=>b(o),children:y(!0)})]})]})},Xe=t=>{_();let n=structuredClone(t.defaultContainerValues);const l=t.handleContainerClick,a=t.showAddContainer,u=t.setShowAddContainer,i=t.defaultContainerValues,f=t.setDefaultContainerValues,m=t.containerEditing,p=t.setContainerEditing,b=t.containerTemplate,y=t.handleContainerSelectValues;return e.jsxs(D,{backdrop:"static","aria-labelledby":"add-new-container-dialog",size:"lg",show:a,onHide:()=>(u(!1),p(!1),f(b)),children:[e.jsx(D.Header,{closeButton:!0,children:e.jsx(D.Title,{as:"label",id:"add-new-container-dialog",children:"Add/Edit a new Container"})}),e.jsxs(w,{"aria-labelledby":"add-new-container",onSubmit:x=>l(x,n),children:[e.jsxs(D.Body,{children:[e.jsxs(F,{children:[e.jsxs(F.Text,{as:"label",id:"add-new-container",className:"top-left-group top-right-group",style:{flexGrow:"2"},children:[" ",m?"Currently editing: "+i.label:"Add New Container"," "]}),m?e.jsx(q,{className:"top-right-group",onClick:()=>(p(!1),f(b)),children:"Cancel"}):""]}),e.jsx(k,{controlId:"container-label",label:"Name",children:e.jsx(w.Control,{className:"middle-left-group middle-right-group",value:i.label,required:!0,placeholder:"Name",onChange:x=>y(x,"label")})}),e.jsx(k,{controlId:"container-weight",label:"Container Weight",children:e.jsx(w.Control,{className:"middle-left-group middle-right-group",value:i.weight,required:!0,placeholder:"Weight (lbs)",type:"number",min:"0",onChange:x=>y(x,"weight")})}),e.jsx(k,{controlId:"container-maximum-weight-allowed-in",label:"Maximum Weight allowed in container",children:e.jsx(w.Control,{className:"bottom-right-group bottom-left-group",value:i.maxWeightIn,required:!0,placeholder:"Weight (lbs)",type:"number",min:"0",onChange:x=>y(x,"maxWeightIn")})})]}),e.jsxs(D.Footer,{children:[e.jsx(q,{variant:"danger",type:"button",onClick:()=>(u(!1),p(!1),f(b)),children:"Close"}),e.jsx(q,{variant:"primary",type:"submit",children:"Save Changes"})]})]})]})},Ze=t=>{_();const n=z(r=>r.inventory.containers),[l,a]=h.useState(""),[u,i]=le(),[f,m]=h.useState(!1),[p,b]=h.useState("0"),[y,x]=h.useState([]),[g,o]=h.useState([]),s=t.inheritShow,C=t.setInheritShow,[I,E]=h.useState([]),N=async r=>{if(r==="mundane"){const{mundaneItems:d}=await Z(()=>import("./itemsSRD-964f1ea8.js"),[]);d.forEach(S=>S.id=ee()),x(d),console.log("mundane")}else{const{magicItems:d}=await Z(()=>import("./itemsSRD-964f1ea8.js"),[]);d.forEach(S=>S.id=ee()),o(d),console.log("magical")}};h.useEffect(()=>{N("mundane"),N("magical")},[]);const V=async r=>{const d=await fetch("https://www.dnd5eapi.co"+r.url);if(!d.ok)console.log("Data coud not be fetched!");else return d.json()};h.useEffect(()=>{if(y.length===237&&I.length===0){console.log("bla");let r=[];y.forEach(d=>{V(d).then(S=>{r.push(S),r.length===237&&(console.log(r),E(r))})})}},[y]),h.useEffect(()=>{},[x]);const $=()=>{m(!1),P(""),C(!s)},M=()=>{m(!0)};h.useEffect(()=>{s&&M()},[s]);const[L,R]=h.useState({spellslots:[],schools:[],ritual:[],classes:[]}),[O,P]=h.useState("");let B=["Mundane Items","Wondrous Items"],c=[y,g];return e.jsxs(U,{show:f,onHide:$,placement:"start",children:[e.jsx(U.Header,{closeButton:!0,onClick:$,children:e.jsx(U.Title,{children:"Item List"})}),e.jsxs(U.Body,{children:[e.jsxs(F,{className:"mb-3 mt-1",children:[e.jsx(F.Text,{id:"container-to-add-to",children:"Container to add Item to"}),e.jsxs(w.Select,{ref:u,value:l,placeholder:"Container","aria-describedby":"container-to-add-to",onChange:r=>a(r.target.value),children:[e.jsx("option",{value:"",children:"Choose container..."}),n.map((r,d)=>e.jsx("option",{value:r.id,children:r.label},`container-label-${r.label}`))]})]}),e.jsx(et,{filters:L,searchField:O,setFilters:R,setSearchField:P}),null,e.jsx("div",{style:{marginLeft:"0.5em",marginRight:"0.5em"},children:e.jsx(oe,{size:"sm",style:{color:"white",border:"black"},children:B.map((r,d)=>e.jsx(ce,{cardID:p,setCardID:b,header:r,bodies:c[d].filter(S=>S.name.toLowerCase().includes(O.toLowerCase())===!0),offCanvas:!0,searchField:O,filters:L,selectedContainer:l,containerFocus:u,setContainerFocus:i},`table-to-add-${r}`))})},t.index)]})]})},et=t=>{const n=(l,a)=>{let u=structuredClone(t.filters);a!="search"?(u[a].push(l.target.value),t.setFilters(u)):a==="search"&&l.target.value};return e.jsxs(e.Fragment,{children:[e.jsx(w.Control,{placeholder:"Search items...",type:"search",onChange:l=>(t.setSearchField(l.target.value),n(l,"search"))}),null]})};const tt=t=>{const[n,l]=h.useState(6),[a,u]=h.useState(0),i=t.moneyPouch,f=Object.keys(t.moneyPouch),m=t.currenciesShortnames;let p=[];t.colors===void 0?f.forEach(g=>p.push("white")):p=t.colors;const b=(g,o,s)=>g===0?"middle":g===o.length-1?s==="edit-submit"?"end-edit-submit":s==="edit-cancel"?"end-edit-cancel":"end":"middle",y=(g,o)=>{n!=o?l(o):l(6)},x=(g,o,s)=>{l(6),t.handleCounter(g,o,s)};return e.jsx(e.Fragment,{children:e.jsxs(F,{children:[e.jsx(F.Text,{style:{border:"1px solid black"},children:"Money"}),f.map((g,o)=>n!=o?e.jsxs("button",{className:b(o,f)+" money-edit-button",style:{backgroundColor:p[o]},onClick:s=>{y(s,o)},children:[i[g]," ",m[g]]},g):e.jsxs(Y,{id:"currency",vertical:!0,style:{zIndex:"5"},"aria-label":`adjust amount of ${g} you have`,children:[e.jsx("button",{type:"submit",className:b(o,f,"edit-submit")+" submit-button",onClick:s=>x(s,g,a),children:"Submit"}),e.jsx("input",{className:"middle edit-input",style:{backgroundColor:p[o]},defaultValue:i[g],onChange:s=>{u(s.target.value)}}),e.jsx("button",{className:b(o,f,"edit-cancel")+" cancel-button",onClick:s=>l(6),children:"Cancel"})]},g))]})})},it=t=>{const n=_(),l=z(j=>j.inventory.inventory),a=z(j=>j.inventory.currency),[u,i]=le();let f={filtered:!0,id:"",name:"",container:"",category:"",qty:"",worth:"",weight:"",isEquipped:"",rarity:"",attunable:"",attuned:"",attuneRequirement:"",description:[""]},m={id:"",value:"",label:"",weight:0,containsWeight:0,maxWeightIn:0};const p=(j,v)=>{let A=structuredClone(R);v==="weight"||v==="maxWeightIn"?A[v]=parseFloat(j.target.value):A[v]=j.target.value,O(A)},[b,y]=h.useState(!1),[x,g]=h.useState(!1),[o,s]=h.useState(!1),[C,I]=h.useState(!1),[E,N]=h.useState(!1),[V,$]=h.useState(!1),[M,L]=h.useState(f),[R,O]=h.useState(m),[P,B]=h.useState({}),[c,r]=h.useState("0"),d=z(j=>j.inventory.containers),S=(j,v)=>{j.preventDefault(),V?(R.id=v.id,n($e(R)),$(!1)):(R.value=R.label.toLowerCase(),n(De(R))),O(m)},G=j=>{j.preventDefault();let v=M;E?(Le.isEqual(v,P)||(v.id=P.id,n(Oe(v))),N(!1)):n(re(v)),L(f)},de=j=>{N(j),s(j)},ue=(j,v)=>{let A=structuredClone(M),W=j.target.value;W==="true"?W=!0:W==="false"&&(W=!1),v==="description"&&(W=W.split(`
`).filter(fe=>fe!="")),A[v]=W,L(A)},he=(j,v,A)=>{v==="change"?console.log(A):n(Ve([v,A]))},me={platinum:"pt",electrum:"ep",gold:"gp",silver:"sp",copper:"cp"};return e.jsxs(Re,{children:[e.jsx("div",{children:e.jsx(tt,{moneyPouch:a,currenciesShortnames:me,colors:["#E5E4E2","#FFD700","#F2E279","#C0C0C0","#B87333"],handleCounter:he})}),e.jsx("div",{style:{marginLeft:"0.5em",marginRight:"0.5em"},children:e.jsx(oe,{size:"sm",style:{color:"white",border:"black"},children:d.map((j,v)=>e.jsx(ce,{index:v,containersLength:d.length,cardID:c,setCardID:r,setOldData:B,changeEditing:de,setContainerEditing:$,setShowAddContainer:I,setDefaultValues:L,setDefaultContainerValues:O,container:j,bodies:l.filter(A=>A.container===j.id),inputRef:u,setInputFocus:i},`inventory-contained-in-${j.value}-id-${j.id}`))})}),e.jsx(q,{style:{width:"fit-content",marginBottom:"0.75em",marginRight:"auto",marginLeft:"auto"},onClick:j=>I(!0),children:"Add Container"}),e.jsx(Xe,{containerTemplate:m,showAddContainer:C,setShowAddContainer:I,defaultContainerValues:R,setDefaultContainerValues:O,containerEditing:V,setContainerEditing:$,handleContainerSelectValues:p,handleContainerClick:S}),e.jsxs(Y,{children:[e.jsx(q,{onClick:j=>g(!x),children:"Add Item"}),e.jsx(q,{onClick:j=>s(!o),children:"Quick Add Item"}),e.jsx(q,{onClick:j=>y(!b),children:"Browse Item List"})]}),e.jsx(Ze,{inheritShow:b,setInheritShow:y}),e.jsx(Ke,{handleSubmit:G,editing:E,setEditing:N,defaultValues:M,setDefaultValues:L,handleSelectValues:ue,itemTemplate:f,inputRef:u,showAddItem:x,setShowAddItem:g,showQuickAddItem:o,setShowQuickAddItem:s})]})};export{it as default};
