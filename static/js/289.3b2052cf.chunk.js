(self.webpackChunkdnd_sheet_test=self.webpackChunkdnd_sheet_test||[]).push([[289],{1289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var a=n(9439),i=n(2791),r=n(9434),l=n(9140),o=n(3360),s=n(6144),c=n(7762),d=n(2591),u=n(4241),p=n(8820),h=n(7425),f=n(6856),m=n(8884),g=n(9743),x=n(2677),v=n(184),j=function(e){var t;t=void 0===e.data?{name:e.name,range:e.range,type:e.type,description:e.description,school:e.school,ritual:e.ritual,classes:e.classes,components:e.components,duration:e.duration,castingTime:e.castingTime}:e.data;for(var n="",a=0;a<t.classes.length;a++)a===t.classes.length-1?n+="".concat(t.classes[a].name):n+="".concat(t.classes[a].name,", ");for(var i="",r=0;r<t.components.length;r++)r===t.components.length-1?i+="".concat(t.components[r]):i+="".concat(t.components[r],", ");return(0,v.jsxs)("div",{className:"".concat(e.show," spellcard"),children:[(0,v.jsxs)("h4",{children:[t.name,null]}),e.offCanvas?(0,v.jsxs)("h6",{children:[" Classes: ",n," "]}):null,(0,v.jsxs)(g.Z,{className:"spellcard-row",children:[(0,v.jsx)(x.Z,{children:"Casting Time:"}),(0,v.jsxs)(x.Z,{md:"auto",children:[t.castingTime," ",t.ritual?" or Ritual":""]})]}),(0,v.jsxs)(g.Z,{className:"spellcard-row",children:[(0,v.jsx)(x.Z,{children:"Range:"}),(0,v.jsx)(x.Z,{md:"auto",children:t.range})]}),(0,v.jsxs)(g.Z,{className:"spellcard-row",children:[(0,v.jsx)(x.Z,{children:"Components:"}),(0,v.jsx)(x.Z,{md:"auto",children:i})]}),(0,v.jsxs)(g.Z,{className:"spellcard-row",children:[(0,v.jsx)(x.Z,{children:"Duration:"}),(0,v.jsxs)(x.Z,{md:"auto",children:[t.duration[0]," ",t.duration[1]?"(Concentration)":null]})]}),(0,v.jsx)(g.Z,{children:(0,v.jsxs)(x.Z,{className:"spellcard-section overflow",children:[t.description[0].map((function(e,n){return(0,v.jsx)("p",{style:{paddingRight:"0.5em",textAlign:"justify"},children:e},"".concat(t.name,"-spellcard-description-").concat(n))})),(0,v.jsxs)("p",{style:{paddingRight:"0.5em",textAlign:"justify"},children:[" ",(0,v.jsx)("b",{children:"At higher levels: "})," ",t.description[1]]})]})}),(0,v.jsx)("section",{children:(0,v.jsxs)("p",{className:"spellcard-footer",children:[t.type," level ",t.school," spell"]})})]},e.id)},b=function(e){var t;return t=void 0!=e.data?e.data:{name:e.name,type:e.type,range:e.range,damage:e.damage,damageType:e.damageType,scaling:e.scaling,description:e.description,isProficient:e.isProficient},(0,v.jsxs)(l.Z,{className:"".concat(e.show," actioncard"),children:[(0,v.jsx)("h4",{children:t.name}),(0,v.jsxs)(g.Z,{className:"actioncard-row",children:[(0,v.jsx)(x.Z,{children:(0,v.jsx)("span",{children:"Action Type: "})}),(0,v.jsx)(x.Z,{md:"auto",children:t.type})]}),(0,v.jsxs)(g.Z,{className:"actioncard-row",children:[(0,v.jsx)(x.Z,{children:(0,v.jsx)("span",{children:"Range: "})}),(0,v.jsx)(x.Z,{md:"auto",children:t.range})]}),(0,v.jsxs)(g.Z,{className:"actioncard-row",children:[(0,v.jsx)(x.Z,{children:(0,v.jsx)("span",{children:"Damage: "})}),(0,v.jsxs)(x.Z,{md:"auto",children:[t.damage," ",void 0!=t.damageType&&"None"!=t.damageType?"("+t.damageType+")":null]})]}),(0,v.jsxs)(g.Z,{className:"actioncard-row",children:[(0,v.jsx)(x.Z,{children:(0,v.jsx)("span",{children:"Scales with: "})}),(0,v.jsx)(x.Z,{md:"auto",children:t.scaling})]}),(0,v.jsx)(g.Z,{children:(0,v.jsx)(x.Z,{className:"actioncard-section overflow",children:(0,v.jsx)("p",{children:t.description})})}),(0,v.jsx)("section",{children:(0,v.jsxs)("p",{className:"actioncard-footer",children:[" ",void 0!=t.isProficient?t.isProficient?"Is proficient.":"Is not proficient.":null]})})]},"".concat(e.id))},y=n(9723),Z=function(e){var t=void 0===e.spellBonus||""===e.spellBonus?0:e.spellBonus,n=void 0===e.singleValue?0:e.singleValue,r=void 0===e.noOptions?void 0===e.options||1===e.options.length:e.noOptions,l=void 0===e.bonus||""===e.bonus?0:parseInt(e.bonus),s=void 0===e.singleValue?null:e.singleValue.toString().includes("d"),c=null!=s&&void 0!=s&&s,d=(0,i.useMemo)((function(){if(void 0!=e.options){if(e.options[0].value.includes(" + MOD")){var a=[];return e.options.forEach((function(e,n){a.push({label:e.label,value:e.value.replace(" + MOD"," + "+t.toString())})})),a}return 1===e.options.length?(e.options[0].value.includes("d")?(n=e.options[0].value,c=!0):n=e.options[0].value,e.options):e.options}return e.options}),[e.options,e.spellBonus]),u=(0,i.useState)(void 0===e.options?n:d[0].value),p=(0,a.Z)(u,2),h=p[0],f=p[1],m=function(e){return"MOD"===e?["Spellcasting Modifier","modifier"]:e.includes("d")?[e.split("d"),"dice"]:[e,"value"]},g=function(e,t,n,a){var i=a,r=n;if("dice"===t){for(var l=e,o=0;o<parseInt(l[0]);o++)r.push(1+Math.floor(Math.random()*parseInt(l[1]))),i+=r[o];return[r,i]}return"value"===t?(r.push(parseInt(e)),[r,i+=parseInt(e)]):"modifier"===t?[r,i+=" + Spellcasting Modifier"]:void console.log("Error: unknown type in rollFunction!")},x=function(t){t.preventDefault(),t.stopPropagation();var n=[],i=0+l;console.log(h);var r=h.split("+"),o=(0,a.Z)(r,2),s=o[0],c=o[1],d=m(s),u=(0,a.Z)(d,2),p=u[0],f=u[1],x=g(p,f,n,i);if(n=x[0],i=x[1],c){var v=m(c),j=(0,a.Z)(v,2),b=j[0],y=j[1],Z=g(b,y,n,i);n=Z[0],i=Z[1]}e.passData(t,e.name,h,n,l,i)},j=(0,i.useState)(!1),b=(0,a.Z)(j,2),Z=b[0],S=b[1],C=function(e){var t=document.getElementById("dice-roll-dropdown"),n=document.getElementById("dice-roll-dropdown");null!=document.getElementById("dice-roll-menu")&&(n=document.getElementById("dice-roll-menu"));var a=e.target;a.id!=t.id&&a.id!=n.id&&a.parentNode.id!=t.id&&a.parentNode.id!=n.id&&Z&&S(!1)},w=function(e){e.stopPropagation(),f(e.target.value)};return(0,i.useEffect)((function(){if(!r)return console.log("initiate event listener",r),document.addEventListener("click",C),function(){document.removeEventListener("click",C)}}),[]),(0,v.jsx)(v.Fragment,{children:r?c?(0,v.jsx)("div",{style:e.dropdownStyle,className:"dice-button-solo",children:(0,v.jsxs)(o.Z,{variant:"primary",className:"dice-button-button-solo",style:e.rollButtonStyle,onClick:x,children:[n," ",""!=e.bonus&&void 0!=e.bonus?"+ "+e.bonus.toString():""]})}):(0,v.jsx)("div",{style:e.noDiceValueStyle,className:"no-dice-value",children:(0,v.jsxs)("span",{children:[n," ",""!=e.bonus&&void 0!=e.bonus?" + "+e.bonus.toString():" "," "]})}):(0,v.jsxs)(y.Z,{id:"dice-roll-dropdown",onBlur:C,show:Z,style:e.dropdownStyle,className:"dice-dropdown",children:[(0,v.jsxs)(o.Z,{variant:"primary",className:"dice-button-button",style:e.rollButtonStyle,onClick:x,children:[h," ",""!=e.bonus&&void 0!=e.bonus?"+ "+e.bonus.toString():""]}),(0,v.jsx)(y.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-custom-2",className:"dice-button-menu-toggle",style:e.toggleButtonStyle,onClick:function(e){e.stopPropagation(),S(!Z)}}),(0,v.jsx)(y.Z.Menu,{id:"dice-roll-menu",variant:"dark",style:e.menuStyle,children:d.map((function(t,n){return(0,v.jsxs)(y.Z.Item,{style:e.itemStyle,as:"button",value:t.value,onClick:w,children:[t.label,": ",t.value]},"dice-option-value-".concat(t.value))}))})]})})},S=n(5905),C=function(e){var t=(0,r.I0)(),n=(0,i.useState)(""),l=(0,a.Z)(n,2),o=l[0],s=l[1],g=(0,r.v9)((function(e){return e.attributes.charAttributes})),x=(0,r.v9)((function(e){return e.attributes.casting.spellAttribute})),y=(0,r.v9)((function(e){return e.attributes.proficiency})),C=(0,r.v9)((function(e){return e.charDetails.charLevel})),w=function(e){return"None"===e||""===e?"":g.filter((function(t){return e===t.name}))[0].bonus},N=function(n){n.stopPropagation();var a=n.target.id,i=n.target.checked,r=e.offCanvas;t((0,m.Ob)(a,i,r))},I=e.offCanvas?"left":"right",A=e.cardID,k=(0,i.useState)([!1,"bla"]),D=(0,a.Z)(k,2),O=D[0],T=D[1],E=(0,i.useState)([!1,A]),P=(0,a.Z)(E,2),F=P[0],B=P[1];(0,i.useEffect)((function(){F[1]!=A&&B([F[0],A])}),[F,A]);var R=(0,i.useState)(null),V=(0,a.Z)(R,2),q=V[0],L=V[1],M=(0,i.useState)(null),_=(0,a.Z)(M,2),z=_[0],H=(_[1],(0,i.useState)(null)),U=(0,a.Z)(H,2),W=U[0],K=(U[1],(0,u.D)(q,z,{placement:I,modifiers:[{name:"arrow",options:{element:W}},{name:"offset",options:{offset:[0,10]}}]})),Q=(K.styles,K.attributes,function(e,t,n){var a,i=[],r=1;if("dmgHigherLevel"===t){if("None"===e)return i.push({value:n,label:"1"}),i;a=Object.keys(e);var l,o=(0,c.Z)(a);try{for(o.s();!(l=o.n()).done;){var s=l.value;i.push({value:e[s],label:s})}}catch(u){o.e(u)}finally{o.f()}return i}if("cantrip"===t){r=e[(a=Object.keys(e))[0]];for(var d=1;d<a.length;d++)if(C<parseInt(a[d])){r=e[a[d-1]];break}return C>=parseInt(a[a.length-1])&&(r=e[a[a.length-1]]),r}return i}),Y=function(e,n,a,i,r,l){t((0,S.Yw)([n,a,i,r,l]))};return(0,v.jsxs)("div",{style:{marginLeft:"0.5em",marginRight:"0.5em"},children:[null,(0,v.jsxs)("h5",{children:[" ",e.header," ",e.spells?"Cantrip"===e.header?"":"Level":""," "]}),(0,v.jsxs)(d.Z,{size:"sm",style:{color:"white",border:"black"},children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[e.spells?(0,v.jsx)("th",{children:e.offCanvas?"Learn":""}):null,(0,v.jsx)("th",{children:" Name "}),e.spells?null:(0,v.jsx)("th",{children:" Hit "}),e.offCanvas?null:(0,v.jsx)("th",{children:" Damage (Type) "}),e.offCanvas?(0,v.jsx)("th",{children:" School "}):(0,v.jsx)("th",{children:" Range "}),e.offCanvas?null:(0,v.jsxs)("th",{children:[" ",""," "]})]})}),(0,v.jsx)("tbody",{children:e.bodies.map((function(n,a){return!e.offCanvas||n.filtered?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("tr",{className:"action-table",id:"".concat(e.offCanvas,"-action-table-row-id-").concat(n.id),onBlur:function(e){return B([!1,n.id])},onClick:function(t){return function(t,n){var a;s(e.bodies.find((function(e,t){return e.id===n}))),A=e.cardID,a="".concat(e.offCanvas,"-action-table-row-id-").concat(n),L(document.getElementById(a)),e.setCardID(n),A=n,O[0]&&O[1]===n?T([!1,"bla"]):T([!0,n]),F[1]===n?B([!F[0],n]):F[0]?(B([F[0],n]),e.setCardID(n)):B([!F[0],n])}(0,n.id)},children:[e.spells?(0,v.jsx)("td",{style:{height:"1.5em",width:"1.5em",zIndex:"2"},children:(0,v.jsx)("div",{className:"checkbox-wrapper ".concat(e.offCanvas?"letter-k":"letter-p"),children:(0,v.jsx)("input",{type:"checkbox",id:n.name,value:"prepared",onClick:N,defaultChecked:n.isPrepared})})}):"",(0,v.jsx)("td",{children:n.name}),e.spells?"":(0,v.jsxs)("td",{children:["None"!=n.damage&&"none"!=n.damage?n.isProficient?y.value+w(n.scaling):0+w(n.scaling):"-"," "]}),e.offCanvas?"":e.spells?(0,v.jsx)("td",{children:"Cantrip"!==e.header?(0,v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[" ","None"!=n.damage?(0,v.jsx)(Z,{passData:Y,name:"".concat(n.name),options:Q(n.damageAtHigherLevel,"dmgHigherLevel",n.damage),spellBonus:w(x)}):n.damage," ","None"!=n.damageType?"("+n.damageType+")":""]}):(0,v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[" ","None"!=n.damage?(0,v.jsx)(Z,{passData:Y,name:"".concat(n.name),noDice:!0,noOptions:!0,singleValue:Q(n.damageAtHigherLevel,"cantrip")}):n.damage,"None"!=n.damageType?"("+n.damageType+")":""]})}):(0,v.jsx)("td",{children:(0,v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,v.jsx)(Z,{passData:Y,name:"".concat(n.name),noDice:!0,noOptions:!0,singleValue:n.damage,bonus:w(n.scaling)}),"(",n.damageType,")"]})}),e.offCanvas?(0,v.jsx)("td",{children:n.school}):(0,v.jsx)("td",{children:n.range}),e.offCanvas?"":(0,v.jsxs)("td",{style:{paddingRight:"0",paddingLeft:"0",justifyItems:"end",zIndex:"2",height:"2.25em",width:"4.5em"},children:[(0,v.jsx)("button",{className:"react-icons-button",onClick:function(t){return function(t,n){t.stopPropagation(),e.setDefaultValues(n),e.setOldData(n),e.setEditing(!0),e.setShowQuickAddAction(!0),e.setInputFocus(),e.inputRef.current.scrollIntoView()}(t,n)},"aria-label":"edit ".concat(e.spells?"spell":"action"),children:(0,v.jsx)(h.Wlu,{size:"1.5em",className:"edit-button"})}),(0,v.jsx)("button",{className:"react-icons-button",onClick:function(a){return function(n,a,i){n.stopPropagation(),t((0,m.mn)(a,e.id))}(a,n.id)},"aria-label":"delete ".concat(e.spells?"spell":"action"),children:(0,v.jsx)(p.FNM,{size:"1.5em",className:"delete-button"})}),O[0]&&O[1]===n.id?(0,v.jsx)("button",{className:"react-icons-button",onClick:function(e){return T([!1,"bla"])},"aria-label":"expand ".concat(e.spells?"spell":"action"," details"),children:(0,v.jsx)(f.Faw,{size:"1.5em",className:"expand-button"})}):(0,v.jsx)("button",{className:"react-icons-button",onClick:function(e){return T([!0,n.id])},"aria-label":"expand ".concat(e.spells?"spell":"action"," details"),children:(0,v.jsx)(f.Yc6,{size:"1.5em",className:"expand-button"})})]})]},"".concat(e.offCanvas,"-action-table-row-id-").concat(n.id)),O[0]&&O[1]===n.id?(0,v.jsx)("tr",{children:e.spells?(0,v.jsx)("td",{style:{borderRight:"1px solid rgba(1,1,1,0.5)",borderLeft:"1px solid rgba(1,1,1,0.5)"},colSpan:5,children:(0,v.jsx)(j,{id:"spellcard-".concat(o.id),offCanvas:e.offCanvas,data:o})}):(0,v.jsx)("td",{style:{borderRight:"1px solid rgba(1,1,1,0.5)",borderLeft:"1px solid rgba(1,1,1,0.5)"},colSpan:5,children:(0,v.jsx)(b,{id:"actioncard-".concat(o.id),data:o})})},"spell-details-id-".concat(n.id)):null]}):""}))})]})]},e.index)},w=n(6648),N=n(3053),I=n(9410),A=n(1537),k=n(2576),D=n(5316),O=n(891),T=function(e){var t=void 0!==e.editing&&e.editing,n=e.setEditing,r=e.defaultValues,l=e.setDefaultValues,s=void 0!==e.spells&&e.spells,c=e.actionTemplate,d=e.handleSubmit,u=e.handleSelectValues,p=e.options,h=e.show,f=e.inputRef,m=(0,O.KK)(),g=(0,a.Z)(m,2),x=g[0],j=g[1],b=(0,i.useState)(!1),y=(0,a.Z)(b,2),Z=y[0],S=y[1],C=(0,i.useState)(r.damage),T=(0,a.Z)(C,2),E=T[0],P=T[1],F=s?"spell":"action",B=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma","None"],R=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],V=["Bludgeoning","Slashing","Piercing","Heal","Cold","Lightning","Thunder","Acid","Poison","Necrotic","Radiant","Psychic","Force","Special","None"],q=[["V"],["S"],["M"],["V","S"],["V","M"],["S","M"],["V","S","M"]],L=function(e){var t;if(e.includes("d")){var n=e.split("d"),a=isNaN(parseInt(n[0])),i=isNaN(parseInt(n[1]));t=!a&&!i}else t=!isNaN(parseInt(e));return t},M=function(e){if("none"===e||"None"===e||""===e)return!0;if(e.includes("d")){var t=e.split("+"),n=L(t[0]),a=!0;return void 0!=t[2]&&(a=L(t[1])),t=n&&a}return!isNaN(parseInt(e))};(0,i.useEffect)((function(){s?void 0===r.duration&&l(c):void 0===r.isProficient&&l(c)}),[r,l,c]),(0,i.useEffect)((function(){t&&(M(E)?(u(E,"damage"),S(!1)):S(!0))}),[E]),(0,i.useEffect)((function(){P(r.damage)}),[r.damage]);var _=function(e){e.preventDefault(),M(E)?d(e):j()},z=function(n){return(0,v.jsxs)(w.Z,{"aria-label":"".concat(t?"edit":"add-new","-").concat(F,"-form"),onSubmit:_,style:{color:"black"},children:[(0,v.jsxs)(D.Z.Body,{children:[(0,v.jsxs)(I.Z,{children:[(0,v.jsx)(N.Z,{controlId:"".concat(F,"-name"),label:"Name",children:(0,v.jsx)(w.Z.Control,{"aria-labelledby":"".concat(F,"-name"),ref:f,required:!0,value:r.name,className:"".concat(n?"top":"middle","-left-group"),placeholder:"",onChange:function(e){return u(e,"name")}})}),(0,v.jsx)(A.Z,{target:f.current,show:h,placement:"top-end",flip:!0,children:(0,v.jsx)(k.Z,{id:"unique-name-overlay",style:{opacity:"1"},children:"Please enter unique Name."})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-range"),label:"Range",children:(0,v.jsx)(w.Z.Control,{required:!0,value:r.range,placeholder:"","aria-labelledby":"".concat(F,"-range"),onChange:function(e){return u(e,"range")}})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-damage"),label:"Damage",children:(0,v.jsx)(w.Z.Control,{required:!0,value:E,ref:x,className:"".concat(n?"top":"middle","-right-group"),placeholder:"","aria-labelledby":"".concat(F,"-damage"),onChange:function(e){return function(e){P(e.target.value),u(e.target.value,"damage")}(e)}})}),(0,v.jsx)(A.Z,{target:x.current,show:Z,placement:"top-end",flip:!0,children:(0,v.jsxs)(k.Z,{id:"damage-layout-overlay",style:{opacity:"1"},children:["Damage must have form of either",(0,v.jsxs)("ul",{children:[(0,v.jsxs)("li",{children:[" ","<number>d<number>, e.g 2d8, 1d20"," "]}),(0,v.jsxs)("li",{children:[" ","A single integer, e.g 20 or 4"," "]}),(0,v.jsx)("li",{children:"A combination of the two, joing by a , e.g 1d4 + 1, 2d4 + 2d8, 20 + 5d10"}),(0,v.jsx)("li",{children:'"None" or "none" if the action/spell has no damage component'})]})]})})]}),(0,v.jsxs)(I.Z,{children:[(0,v.jsx)(N.Z,{controlId:"".concat(F,"-").concat(s?"tier":"type"),label:"".concat(s?"Tier":"Type"),children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.type,className:"middle-left-group","aria-labelledby":"".concat(F,"-").concat(s?"tier":"type"),onChange:function(e){return u(e,"type")},children:[s?(0,v.jsx)("option",{value:"",children:"Choose Spell Tier"},"0"):(0,v.jsx)("option",{value:"",children:"Choose Action Type"},"0"),p.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},"action-type-".concat(e))}))]})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-scaling-attribute"),label:"Scaling Attribute",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.scaling,className:"middle-right-group","aria-labelledby":"".concat(F,"-scaling-attribute"),onChange:function(e){return u(e,"scaling")},children:[(0,v.jsx)("option",{value:"",children:"Choose Scaling Attribute"}),B.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},"scaling-attribute-".concat(e))}))]})})]}),s&&void 0!=r.duration?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(I.Z,{children:[(0,v.jsx)(N.Z,{controlId:"".concat(F,"-school"),label:"School",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.school,className:"middle-left-group","aria-labelledby":"".concat(F,"-school"),onChange:function(e){return u(e,"school")},children:[(0,v.jsx)("option",{value:"",children:"Choose school"}),R.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},"spell-shool-".concat(e))}))]})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-is-ritual"),label:"Is Ritual?",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.ritual,className:"middle-right-group",type:"boolean","aria-labelledby":"".concat(F,"-is-ritual"),onChange:function(e){return u(e,"ritual")},children:[(0,v.jsx)("option",{value:"",children:" Choose is ritual "}),(0,v.jsx)("option",{value:!0,children:"Yes"}),(0,v.jsx)("option",{value:!1,children:"No"})]})})]}),(0,v.jsxs)(I.Z,{children:[(0,v.jsx)(N.Z,{controlId:"".concat(F,"-casting-time"),label:"Casting time",children:(0,v.jsx)(w.Z.Control,{required:!0,type:"text",value:r.castingTime,className:"middle-left-group",placeholder:"","aria-labelledby":"".concat(F,"-casting-time"),onChange:function(e){return u(e,"castingTime")}})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-duration"),label:"Duration",children:(0,v.jsx)(w.Z.Control,{required:!0,type:"text",value:r.duration[0],placeholder:"","aria-labelledby":"".concat(F,"-duration"),onChange:function(e){return u(e,"duration_0")}})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-concentration"),label:"Concentration?",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.duration[1],className:"middle-right-group",type:"boolean","aria-labelledby":"".concat(F,"-concentration"),onChange:function(e){return u(e,"duration_1")},children:[(0,v.jsx)("option",{value:"",children:" Requires concentration? "}),(0,v.jsx)("option",{value:!0,children:"Yes"}),(0,v.jsx)("option",{value:!1,children:"No"})]})})]})]}):null,(0,v.jsxs)(I.Z,{children:[s&&void 0!=r.duration?(0,v.jsx)(N.Z,{controlId:"".concat(F,"-components"),label:"Components",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.components,className:"middle-left-group",type:"text","aria-labelledby":"".concat(F,"-components"),onChange:function(e){return u(e,"components")},children:[(0,v.jsx)("option",{value:"",children:"Choose components"}),q.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},"component-choice-".concat(e))}))]})}):(0,v.jsx)(N.Z,{controlId:"".concat(F,"-is-proficient"),label:"Is Proficient?",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.isProficient,className:"middle-left-group",type:"boolean","aria-labelledby":"".concat(F,"-is-proficient"),onChange:function(e){return u(e,"isProficient")},children:[(0,v.jsx)("option",{value:"",children:"Choose if proficient"}),(0,v.jsx)("option",{value:!0,children:"Yes"}),(0,v.jsx)("option",{value:!1,children:"No"})]})}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-damage-type"),label:"Damage Type",children:(0,v.jsxs)(w.Z.Select,{required:!0,value:r.damageType,className:"middle-right-group","aria-labelledby":"".concat(F,"-damage-type"),onChange:function(e){return u(e,"damageType")},children:[(0,v.jsx)("option",{value:"",children:"Choose Damage Type"}),V.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},"damage-type-".concat(e))}))]})}),n?null:(0,v.jsx)(o.Z,{variant:"success",className:"middle-right-group","aria-label":"Submit",type:"submit",children:"Submit"})]}),(0,v.jsx)(N.Z,{controlId:"".concat(F,"-description"),label:"Description",children:(0,v.jsx)(w.Z.Control,{as:"textarea",className:"middle-left-group middle-right-group",style:{height:"8em"},"aria-label":"description",placeholder:"",value:r.description[0],onChange:function(e){return u(e,"description_0")}})}),s&&void 0!=r.duration?(0,v.jsx)(N.Z,{controlId:"".concat(F,"-description-at-higher-level"),label:"At higher level",children:(0,v.jsx)(w.Z.Control,{as:"textarea",className:"bottom-left-group bottom-right-group",style:{height:"8em"},"aria-label":"at higher level",placeholder:"",value:r.description[1],onChange:function(e){return u(e,"description_1")}})}):null]}),n?(0,v.jsxs)(D.Z.Footer,{children:[(0,v.jsx)(o.Z,{variant:"danger",onClick:function(){return e.setShowAddAction(!1)},children:"Close"}),(0,v.jsx)(o.Z,{variant:"primary",type:"submit",children:"Save Changes"})]}):null]})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{"aria-labelledby":"".concat(t?"edit":"add-new","-").concat(F),className:e.showQuickAddAction?null:"visually-hidden",children:[(0,v.jsxs)(I.Z,{children:[(0,v.jsxs)(I.Z.Text,{as:"label",id:"".concat(t?"edit":"add-new","-").concat(F),className:"top-left-group top-right-group",style:{flexGrow:"2"},children:[" ",t?"Currently editing: "+r.name:s?"Add New Spell":"Add New Action/Bonus Action/etc:"," "]}),t?(0,v.jsx)(o.Z,{onClick:function(e){n(!1),l(c)},children:"Cancel"}):""]}),z(!1)]}),(0,v.jsxs)(D.Z,{backdrop:"static","aria-labelledby":"add-new-".concat(F,"-dialog"),contentClassName:"modal-custom",size:"lg",show:e.showAddAction,onHide:function(){return e.setShowAddAction(!1)},children:[(0,v.jsx)(D.Z.Header,{closeButton:!0,children:(0,v.jsxs)(D.Z.Title,{as:"label",id:"add-new-".concat(F,"-dialog"),children:["Adding a new ",s?"Spell":"Action"]})}),z(!0)]})]})},E=n(5167),P=n(7022),F=function(e){var t=(0,r.I0)(),n=e.inheritShow,l=e.setInheritShow,o=(0,r.v9)((function(e){return e.actions.sortedSpellList})),s=(0,i.useState)(!1),c=(0,a.Z)(s,2),d=c[0],u=c[1],p=(0,i.useState)("0"),h=(0,a.Z)(p,2),f=h[0],g=h[1],x=function(){u(!1),t((0,m.O1)([{spellslots:[],schools:[],ritual:[],classes:[]},""])),l(!n)};(0,i.useEffect)((function(){n&&u(!0)}),[n]);var j=(0,i.useState)({spellslots:[],schools:[],ritual:[],classes:[]}),b=(0,a.Z)(j,2),y=b[0],Z=b[1],S=(0,i.useState)(""),w=(0,a.Z)(S,2),N=w[0],I=w[1],A=Object.keys(y),k=function(e,n,a){var i=structuredClone(y);i[a]=i[a].slice(0,n).concat(i[a].slice(n+1)),Z(i),t((0,m.O1)([i,N]))};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(E.Z,{border:"dark",style:{color:"white",backgroundColor:"#6c757d",width:"478px",marginTop:"3em"},show:d,onHide:x,placement:"start",scroll:"true",children:[(0,v.jsx)(E.Z.Header,{closeButton:!0,onClick:x,children:(0,v.jsx)(E.Z.Title,{children:"Spell List"})}),(0,v.jsxs)(E.Z.Body,{children:[(0,v.jsx)(R,{filters:y,searchField:N,setFilters:Z,setSearchField:I}),(0,v.jsxs)(P.Z,{fluid:!0,className:"filter-container",children:[(0,v.jsx)("span",{children:"Filters: "}),A.map((function(e){return y[e].map((function(t,n){return(0,v.jsx)(B,{index:n,type:e,name:t,handleDelete:k},"filter-item-".concat(t))}))}))]}),["Cantrip","1st","2nd","3rd","4th","5th","6th","7th","8th","9th"].map((function(t,n){return(0,v.jsx)(C,{cardID:f,setCardID:g,offCanvas:!0,id:e.id,header:t,searchField:N,filters:y,bodies:o.filter((function(e){return e.type===t})),spells:"true"},"action-table-".concat(t))}))]})]})})},B=function(e){return(0,v.jsxs)("div",{className:"filter-body",children:[e.name," ",(0,v.jsx)(p.SV5,{type:"button",color:"black",size:"20",id:"delete-button",onClick:function(t){return e.handleDelete(t,e.index,e.type)},className:"filter-delete-button"})]})},R=function(e){var t=(0,r.I0)(),n="",a=function(a,i){"search"===i?e.setSearchField(a.target.value):n=a.target.value;var r=structuredClone(e.filters),l="";"search"!=i?(r[i].push(a.target.value),e.setFilters(r)):"search"===i&&(l=a.target.value),t((0,m.O1)([r,l]))};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.Z.Control,{placeholder:"Search",type:"search",onChange:function(e){return a(e,"search")}}),(0,v.jsxs)(I.Z,{children:[(0,v.jsxs)(w.Z.Select,{value:n,"aria-label":"Choose spell school",onChange:function(e){return a(e,"schools")},children:[(0,v.jsx)("option",{value:"",children:"Filter schools"}),["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"].map((function(t,n){return 0===e.filters.schools.filter((function(e){return e===t})).length?(0,v.jsx)("option",{value:t,children:t},"filter-option-school-".concat(t)):""}))]}),(0,v.jsxs)(w.Z.Select,{value:n,"aria-label":"Choose class",onChange:function(e){return a(e,"classes")},children:[(0,v.jsx)("option",{value:"",children:"Filter classes"}),["Bard","Cleric","Druid","Paladin","Ranger","Sorcerer","Warlock","Wizard"].map((function(t,n){return 0===e.filters.classes.filter((function(e){return e===t})).length?(0,v.jsx)("option",{value:t,children:t},"filter-option-class-".concat(t)):""}))]})]}),(0,v.jsxs)(I.Z,{children:[(0,v.jsxs)(w.Z.Select,{value:n,"aria-label":"Choose spell slot",onChange:function(e){return a(e,"spellslots")},children:[(0,v.jsx)("option",{value:"",children:"Filter spell tier"}),["Cantrip","1st","2nd","3rd","4th","5th","6th","7th","8th","9th"].map((function(t,n){return 0===e.filters.spellslots.filter((function(e){return e===t})).length?(0,v.jsx)("option",{value:t,children:t},"filter-option-level-".concat(t)):""}))]}),(0,v.jsxs)(w.Z.Select,{value:n,"aria-label":"Is spell Ritual",onChange:function(e){return a(e,"ritual")},children:[(0,v.jsx)("option",{value:"",children:" Is spell ritual? "}),0===e.filters.ritual.filter((function(e){return"ritual"===e})).length?(0,v.jsx)("option",{value:"ritual",children:" Is ritual spell "}):"",0===e.filters.ritual.filter((function(e){return"not ritual"===e})).length?(0,v.jsx)("option",{value:"not ritual",children:" Is not ritual spell"}):""]})]})]})},V=n(763);function q(e){var t=(0,r.I0)(),n="Spells"===e.id?{showCard:!1,filtered:!0,id:"",name:"",range:"",damage:"",damageAtHigherLevel:"None",type:"",scaling:"",isPrepared:!1,damageType:"",description:["",""],school:"",ritual:"",classes:"",components:"",duration:["",""],castingTime:""}:{id:"",name:"",range:"",damage:"",type:"",scaling:"",isProficient:"",damageType:"",description:""},c=(0,r.v9)((function(e){return e.actions.actions})),d=(0,r.v9)((function(e){return e.actions.sortedSpellList})),u=(0,i.useState)(!1),p=(0,a.Z)(u,2),h=p[0],f=p[1],g=(0,i.useState)(!1),x=(0,a.Z)(g,2),j=x[0],b=x[1],y=(0,i.useState)(!1),Z=(0,a.Z)(y,2),S=Z[0],w=Z[1],N=(0,i.useState)(n),I=(0,a.Z)(N,2),A=I[0],k=I[1],D=(0,i.useState)({}),E=(0,a.Z)(D,2),P=E[0],B=E[1],R=(0,i.useState)(!1),q=(0,a.Z)(R,2),L=q[0],M=q[1],_=(0,i.useState)(!1),z=(0,a.Z)(_,2),H=z[0],U=z[1],W=(0,i.useState)("0"),K=(0,a.Z)(W,2),Q=K[0],Y=K[1],G=(0,O.KK)(),$=(0,a.Z)(G,2),J=$[0],X=$[1];return(0,v.jsxs)(l.Z,{className:"main-element-sub-card",id:"ActionsPart",children:[e.headers.map((function(t,n){return(0,v.jsx)(C,{cardID:Q,setCardID:Y,setOldData:B,setEditing:M,setShowQuickAddAction:w,setDefaultValues:k,offCanvas:e.offCanvas,id:e.id,header:t,bodies:e.actions.filter((function(e){return e.type===t})),spells:e.spells,inputRef:J,setInputFocus:X},"actions-table-".concat(t))})),(0,v.jsxs)(s.Z,{children:[(0,v.jsxs)(o.Z,{onClick:function(e){return b(!j)},children:["Add ","Spells"===e.id?"Spell":"Action"]}),(0,v.jsxs)(o.Z,{onClick:function(e){return w(!S)},children:["Quick Add ","Spells"===e.id?"Spell":"Action"]}),"Spells"===e.id?(0,v.jsx)(o.Z,{onClick:function(e){return f(!h)},children:"Browse Spell List"}):null]}),"Spells"===e.id?(0,v.jsx)(F,{inheritShow:h,setInheritShow:f}):"",(0,v.jsx)(T,{show:H,editing:L,setEditing:M,defaultValues:A,setDefaultValues:k,inputRef:J,spells:e.spells,actionTemplate:n,handleSubmit:function(a){a.preventDefault();var i=A,r=!1;L?(V.isEqual(i,P)||(i.id=P.id,t((0,m.qK)(i,e.id,P.name))),M(!1)):0!=c.filter((function(e){return e.name===a.target[0].value})).length||0!=d.filter((function(e){return e.name===a.target[0].value})).length?(a.stopPropagation(),U(!0),X(),r=!0):t((0,m.KG)(i,e.id)),r||(k(n),U(!1),b(!1))},handleSelectValues:function(e,t){var n=structuredClone(A);void 0!=e.target&&(n[t]=e.target.value),"damage"===t&&(n[t]=e),"description_0"===t?n.description=[e.target.value,n.description[1]]:"description_1"===t?n.description=[n.description[0],e.target.value]:"duration_0"===t?n.duration=[e.target.value,n.duration[1]]:"duration_1"===t&&(n.duration=[n.duration[0],e.target.value]),k(n)},options:e.options,showAddAction:j,setShowAddAction:b,showQuickAddAction:S,setShowQuickAddAction:w})]})}},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,a="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,l){if(e===l)return!0;if(e&&l&&"object"==typeof e&&"object"==typeof l){if(e.constructor!==l.constructor)return!1;var o,s,c,d;if(Array.isArray(e)){if((o=e.length)!=l.length)return!1;for(s=o;0!==s--;)if(!r(e[s],l[s]))return!1;return!0}if(n&&e instanceof Map&&l instanceof Map){if(e.size!==l.size)return!1;for(d=e.entries();!(s=d.next()).done;)if(!l.has(s.value[0]))return!1;for(d=e.entries();!(s=d.next()).done;)if(!r(s.value[1],l.get(s.value[0])))return!1;return!0}if(a&&e instanceof Set&&l instanceof Set){if(e.size!==l.size)return!1;for(d=e.entries();!(s=d.next()).done;)if(!l.has(s.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(l)){if((o=e.length)!=l.length)return!1;for(s=o;0!==s--;)if(e[s]!==l[s])return!1;return!0}if(e.constructor===RegExp)return e.source===l.source&&e.flags===l.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof l.valueOf)return e.valueOf()===l.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof l.toString)return e.toString()===l.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(l).length)return!1;for(s=o;0!==s--;)if(!Object.prototype.hasOwnProperty.call(l,c[s]))return!1;if(t&&e instanceof Element)return!1;for(s=o;0!==s--;)if(("_owner"!==c[s]&&"__v"!==c[s]&&"__o"!==c[s]||!e.$$typeof)&&!r(e[c[s]],l[c[s]]))return!1;return!0}return e!==e&&l!==l}e.exports=function(e,t){try{return r(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},4241:function(e,t,n){"use strict";n.d(t,{D:function(){return C}});var a=n(2791),i=n(4164),r=n(761),l=n(1217),o=n(545),s=n(9224),c=n(3120),d=n(9265);var u={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},a=t.attributes[e]||{},i=t.elements[e];(0,d.Re)(i)&&(0,c.Z)(i)&&(Object.assign(i.style,n),Object.keys(a).forEach((function(e){var t=a[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var a=t.elements[e],i=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});(0,d.Re)(a)&&(0,c.Z)(a)&&(Object.assign(a.style,r),Object.keys(i).forEach((function(e){a.removeAttribute(e)})))}))}},requires:["computeStyles"]},p=n(5934),h=n(5468),f=n(9790),m=n(8702),g=n(1668),x=[l.Z,o.Z,s.Z,u,p.Z,h.Z,f.Z,m.Z,g.Z],v=(0,r.kZ)({defaultModifiers:x}),j=n(77),b=n.n(j),y=function(e){return e.reduce((function(e,t){var n=t[0],a=t[1];return e[n]=a,e}),{})},Z="undefined"!==typeof window&&window.document&&window.document.createElement?a.useLayoutEffect:a.useEffect,S=[],C=function(e,t,n){void 0===n&&(n={});var r=a.useRef(null),l={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||S},o=a.useState({styles:{popper:{position:l.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=o[0],c=o[1],d=a.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);i.flushSync((function(){c({styles:y(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:y(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),u=a.useMemo((function(){var e={onFirstUpdate:l.onFirstUpdate,placement:l.placement,strategy:l.strategy,modifiers:[].concat(l.modifiers,[d,{name:"applyStyles",enabled:!1}])};return b()(r.current,e)?r.current||e:(r.current=e,e)}),[l.onFirstUpdate,l.placement,l.strategy,l.modifiers,d]),p=a.useRef();return Z((function(){p.current&&p.current.setOptions(u)}),[u]),Z((function(){if(null!=e&&null!=t){var a=(n.createPopper||v)(e,t,u);return p.current=a,function(){a.destroy(),p.current=null}}}),[e,t,n.createPopper]),{state:p.current?p.current.state:null,styles:s.styles,attributes:s.attributes,update:p.current?p.current.update:null,forceUpdate:p.current?p.current.forceUpdate:null}}}}]);
//# sourceMappingURL=289.3b2052cf.chunk.js.map